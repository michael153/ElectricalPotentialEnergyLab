<!DOCTYPE html>
<html lang = "en-us">
	<head>
		<meta charset = "UTF-8">
		<title>Electrical Potential Energy Lab</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="js/Circle.js"></script>
		<script src="js/Line.js"></script>
		<script src="js/RKDemo.js"></script>
		<script src="js/potential.js"></script>
	</head>
	<body>
		<div id = "top" align = "center" style = "vertical-align: middle">
			<input type="range" min="1" max="50" value="5" class="slider" id="dx">
			<label id = "dxLabel">Simulation Speed = </label><output id="dxOutput">5</output>
			
			<input type="range" min="0" max="700" value="0" class="slider" id="vx">
			<label id = "dxLabel">vx = </label><output id="vxOutput">0</output>
			
			<input type="range" min="0" max="700" value="0" class="slider" id="vy">
			<label id = "dyLabel">vy = </label><output id="vyOutput">0</output>
			
			<input type="submit" id = 'go' value="Go"/>
			<input type="submit" id = 'restart' value="Restart"/>
		</div>
		<br>
		<div id = "container" align = "center">
			<canvas id="panel" width="1200" height="700" style="border:1px solid #000000;"></canvas>
		</div>
	</body>
	<script>
		document.getElementById("dx").oninput = function() {
			var val = document.getElementById("dx").value;
			document.getElementById('dxOutput').innerHTML = val;
		};
		document.getElementById("vx").oninput = function() {
			var val = document.getElementById("vx").value;
			document.getElementById('vxOutput').innerHTML = val;
		};
		document.getElementById("vy").oninput = function() {
			var val = document.getElementById("vy").value;
			document.getElementById('vyOutput').innerHTML = val;
		};
	</script>
	<script>
		var canvas = document.getElementById("panel");
		var context = canvas.getContext("2d");

		window.onload = function() {
			console.log("Calling init()...");
			init();
		}
		// drawPoint(context, chargeOfPoint, xPoint, yPoint, radiusPoint);
		// drawPoint(context, chargeOfBottom, xBottomCharge, yBottomCharge, radiusCharge);
		// drawPoint(context, chargeOfTop, xTopCharge, yTopCharge, radiusCharge);
	</script>
	
	<!-- All the listeners -->
	<script>
		var start = {x: 0, y: 0};
		var end = {x: 0, y: 0};
		var flag = 0;

		canvas.addEventListener("mousedown", function(e) {
			start.x = e.pageX - this.offsetLeft;
			start.y = e.pageY - this.offsetTop;
			flag = 1;
		}, false);
		
		canvas.addEventListener("mousemove", function(e) {
			if (flag === 1) {
				end.x = e.pageX - this.offsetLeft;
				end.y = e.pageY - this.offsetTop;
				console.log("Starting from (" + start.x + ", " + start.y + ") --> (" + end.x + ", " + end.y + ")");
				checkDragSphere(end.x, end.y, "bottom");
				checkDragSphere(end.x, end.y, "top");
			}
		}, false);
		
		canvas.addEventListener("mouseup", function(e) {
			flag = 0;
			resetHits();
		}, false);
	</script>
	<script>
		window.addEventListener('resize', function(e) {
			iterateSimulation(canvas, context);
		})
		document.getElementById("go").onclick = function() {
			inAction = true;
			simTimer = setInterval(function() {
				iterateSimulation(canvas, context)
			}, 0.5);
		};
		document.getElementById("restart").onclick = function() {
			inAction = false;
			clearInterval(simTimer);
			hardReset();
		};
	</script>
</html>